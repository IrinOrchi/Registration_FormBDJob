<div class="bg-[#F9FAFB] w-[1750px] h-[3022px]">

    <!-- Header Section -->
    <div class="flex justify-between items-center p-8 shadow-lg"
         style="background: url('/assets/images/mid-header.svg') no-repeat; width: 1750px; height: 287px; flex-shrink: 0;"></div>
  
    <!-- Form -->
    <form action="" [formGroup]="employeeForm" (ngSubmit)="onContinue()">
  
      <!-- User Information Section -->
      <div class="max-w-7xl p-6 mx-auto flex-col -mt-24 items-start gap-5 rounded-2xl bg-white shadow-lg">
        <h2 class="flex items-center mb-4 text-lg font-semibold text-blue-700">
          <span class="icon icon-user mr-2"></span> Let’s fill in the user information first
        </h2>
  
        <!-- Username Field -->
        <div class="flex flex-col sm:flex-row sm:gap-6">
          <div class="flex-1">
            <app-input-field
              label="Username"
              name="txtUserName"
              id="txtUserName"
              [control]="usernameControl()"
              placeholder="Type Username"
              [maxLength]="20"
              [isRequired]="true"
              errorMessage="Username is required">
            </app-input-field>
            <div class="text-red-600">
              @if(employeeForm.controls['username'].touched && employeeForm.controls['username'].errors?.['required']) {
                <span class="error-message">Username cannot be empty.</span>
              }
              @else if(usernameExistsMessage) {
                <span class="error-message">{{ usernameExistsMessage }}</span>
              }
            </div>
          </div>
          
          <!-- Password Field -->
          <div class="flex-1">
            <app-input-field
              label="Password"
              name="txtPassword"
              id="txtPassword"
              [control]="formControlSignals()['password']"
              placeholder="Type Password"
              [maxLength]="8"
              [isRequired]="true"
              errorMessage="Password is required">
            </app-input-field>
            <div class="text-red-600">
              @if(employeeForm.controls['password'].touched && employeeForm.controls['password'].errors?.['required']) {
                <span class="error-message">Password is required</span>
              }
              @else if(employeeForm.controls['password'].errors?.['minlength']) {
                <span class="error-message">Minimum length should be 6</span>
              }
            </div>
          </div>
  
          <!-- Confirm Password Field -->
          <div class="flex-1">
            <app-input-field
              label="Confirm Password"
              name="txtConfirmPassword"
              id="txtConfirmPassword"
              [control]="formControlSignals()['confirmPassword']"
              placeholder="Retype password"
              [maxLength]="8"
              [isRequired]="true"
              errorMessage="Confirm Password is required">
            </app-input-field>
            <div class="text-red-600">
              @if(employeeForm.controls['confirmPassword'].touched && employeeForm.controls['confirmPassword'].errors?.['required']) {
                <span class="error-message">Confirm Password is required</span>
              }
              @else if(employeeForm.controls['confirmPassword'].errors?.['minlength']) {
                <span class="error-message">Minimum length should be 6</span>
              }
            </div>
          </div>
        </div>
      </div>
  
      <!-- Company Details Section -->
      <div class="max-w-7xl p-6 mx-auto flex-col mt-6 items-start gap-5 rounded-2xl bg-white shadow-lg">
        <h2 class="flex items-center mb-4 text-lg font-semibold text-blue-700">
          <span class="icon icon-commercial mr-2"></span> Now, fill in the detailed information
        </h2>
  
        <!-- Company Name, Bangla Name, and Establishment Year -->
        <div class="flex flex-col sm:flex-row sm:gap-6">
  
          <!-- Company Name in English -->
          <div class="flex-1">
            <app-input-field
              label="Company Name"
              name="txtCompanyName"
              id="txtCompanyName"
              [control]="companyNameControl()"
              placeholder="Type Company Name"
              [maxLength]="120"
              [isRequired]="true"
              errorMessage="Company Name is required">
            </app-input-field>
            <div class="text-red-600">
              @if(employeeForm.controls['companyName'].touched && employeeForm.controls['companyName'].errors?.['required']) {
                <span class="error-message">Company Name is required</span>
              }
              @else if(companyNameExistsMessage) {
                <span class="error-message">{{ companyNameExistsMessage }}</span>
              }
            </div>
          </div>
  
          <!-- Company Name in Bangla -->
          <div class="flex-1">
            <app-input-field
              label="কোম্পানির নাম (বাংলায়)"
              name="txtCompanyNameBangla"
              id="txtCompanyNameBangla"
              [control]="formControlSignals()['companyNameBangla']"
              placeholder="Type Company Name"
              [maxLength]="120"
              [isRequired]="false">
            </app-input-field>
          </div>
  
          <!-- Year of Establishment -->
          <div class="flex-1">
            <app-input-field
              label="Year of Establishment"
              name="txtCompanyEstablished"
              id="txtCompanyEstablished"
              [control]="formControlSignals()['yearsOfEstablishMent']"
              placeholder="Type Establishment Year"
              [maxLength]="4"
              [isRequired]="true">
            </app-input-field>
            <div class="text-red-600">
              @if(employeeForm.controls['yearsOfEstablishMent'].touched && employeeForm.controls['yearsOfEstablishMent'].errors?.['required']) {
                <span class="error-message">This is required</span>
              }
            </div>
          </div>
        </div>
  
        <!-- Additional Company Information and Address -->
        <app-radio-group
          label="Number of Employees"
          [options]="['1-25', '26-50', '51-100', '101-500', '501-1000', '1000+']"
          [isRequired]="true">
        </app-radio-group>
  
        <h2 class="block text-sm font-semibold text-gray-700 mt-4 mb-2">
          Company Address <span class="text-red-500">*</span>
        </h2>
  
        <!-- Country and Region Selection -->
        <div class="flex flex-col sm:flex-row sm:gap-6">
          
          <!-- Country Dropdown -->
          <div class="flex-1">
            <select
              id="country"
              class="flex w-[400px] p-[14px] rounded-lg border border-[#DAE5EC] bg-white shadow-sm"
              [formControl]="countryControl()"
              (change)="onCountryChange()">
              <option value="" disabled>Select Country</option>
              <option *ngFor="let country of countries" [value]="country.OptionValue">{{ country.OptionText }}</option>
            </select>
            <div class="text-red-600 mt-1">
              @if(countryControl().touched && countryControl().hasError('required')) {
                <span class="error-message">This is required</span>
              }
            </div>
          </div>
  
          <!-- District and Thana (Conditional) -->
          <ng-container *ngIf="!outsideBd">
            <!-- District -->
            <div class="flex-1">
              <select
                id="district"
                class="flex w-[400px] p-[14px] rounded-lg border border-[#DAE5EC] bg-white shadow-sm"
                [formControl]="districtControl()"
                [disabled]="districts.length === 0">
                <option value="" disabled>Select District</option>
                <option *ngFor="let district of districts" [value]="district.OptionValue">{{ district.OptionText }}</option>
              </select>
              <div class="text-red-600 mt-1">
                @if(districtControl().touched && districtControl().hasError('required')) {
                  <span class="error-message">This is required</span>
                }
              </div>
            </div>
  
            <!-- Thana -->
            <div class="flex-1">
              <select
                class="flex w-[400px] p-[14px] rounded-lg border border-[#DAE5EC] bg-white shadow-sm"
                [formControl]="thanaControl()"
                [disabled]="thanas.length === 0">
                <option value="" disabled>Select Thana</option>
                <option *ngFor="let thana of thanas" [value]="thana.OptionValue">{{ thana.OptionText }}</option>
              </select>
              <div class="text-red-600 mt-1">
                @if(thanaControl().touched && thanaControl().hasError('required')) {
                  <span class="error-message">This is required</span>
                }
              </div>
            </div>
          </ng-container>
  
          <!-- City Input Field (if outsideBd is true) -->
          <ng-container *ngIf="outsideBd">
            <div class="flex-1">
              <input
                type="text"
                id="city"
                placeholder="Type City Name"
                class="flex w-[400px] p-[14px] rounded-lg border border-[#DAE5EC] bg-white shadow-sm"
                [formControl]="formControlSignals()['cityName']"
                maxlength="30">
           
              </div>
          </ng-container>
        </div>
  
        <!-- Company Address Fields -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
          <div class="col-span-1">
            <app-text-area
              name="txtCompanyAddress"
              id="txtCompanyAddress"
              placeholder="Write Company Detail Address In English"
              [control]="formControlSignals()['companyAddress']"
              [maxLength]="300"
              [rows]="4">
            </app-text-area>
            <div class="text-red-600">
              @if(employeeForm.controls['companyAddress'].touched && employeeForm.controls['companyAddress'].errors?.['required']) {
                <span class="error-message">This is required</span>
              }
            </div>
          </div>
  
          <div class="col-span-1">
            <app-text-area
              name="txtCompanyAddressBng"
              id="txtCompanyAddressBng"
              placeholder="Write Company Detail Address In Bangla"
              [control]="formControlSignals()['companyAddressBangla']"
              [maxLength]="300"
              [rows]="4">
            </app-text-area>
          </div>
        </div>
  
 
        <h2 class="block text-sm font-semibold text-gray-700 mt-4 mb-2">
            Industry Type <span class="text-red-500">*</span>
          </h2>  
             
      <!-- Industry Type Select Dropdown -->
<div class="col-span-1 ">
    <select formControlName="industryType" id="SelCat" 
            class="flex w-[611px] p-[14px_16px] justify-between items-center rounded-lg border border-[#DAE5EC] bg-white shadow-[0px_1px_2px_rgba(0,0,0,0.05)]"> 
            (change)="onCategoryChange($event)">
      <option value="" disabled selected>All</option>
      @for (industry of industries | async; track industry.IndustryId) {
        <option [value]="industry?.IndustryId">{{ industry?.IndustryName }}</option>
      }
    </select>
  </div>

  <div class="flex flex-col items-start gap-6 self-stretch max-w-full overflow-y-scroll rounded-lg border border-[#DAE5EC] bg-white shadow-[0px_1px_2px_rgba(0,0,0,0.05)] p-6 mt-6 mb-2.5">

    <div>
        <input [formControl]="searchControl"
               class="flex w-[1151px] p-[14px] px-[16px] justify-between items-center self-stretch rounded-[8px] border border-[#DAE5EC] bg-white shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)]" 
               placeholder="Search Industry Type">
      </div>


    <div class="grid grid-cols-3 h-24 p-[24px]  items-start gap-[24px] self-stretch  industry-list ">
      @if (filteredIndustryTypes.length > 0) {
        @for (item of getTypes(); track item.IndustryValue) {
          <div class="flex items-center">
            <input 
              name="industry_type" 
              id="industry_type_{{item.IndustryValue}}" 
              type="checkbox" 
              [value]="item.IndustryValue"
              class="h-4 w-4 text-blue-600 cursor-pointer border border-black/30 shadow-inner 
                     checked:bg-blue-600 checked:border-blue-600" 
            >
            <label 
              for="industry_type_{{item.IndustryValue}}" 
              class="ml-2 text-sm font-sans text-black leading-[1.42857143]">
              {{ item.IndustryName }}
            </label>
          </div>
        }
      } 
    </div>
     <!-- Show More Button -->
     @if (!showAll) {
        <button 
          class="text-blue-600 text-sm font-semibold mt-2 focus:outline-none underline industry-list" 
          (click)="toggleShowAll()">
          See more
        </button>
      }
  </div>
  
 
  <h2 class="block text-sm font-semibold text-gray-700 mt-4 mb-2">
    Business Description <span class="text-red-500">*</span>
  </h2>     
  
  <app-text-area
  name="txtDescription"
  id="txtDescription"
  [control]="formControlSignals()['businessDesc']"
  placeholder="Write Business Description"
  [rows]="4"
  ></app-text-area>
  
  <div class="flex flex-col sm:flex-row sm:gap-6">
    <div class="flex-1">
      <app-input-field
      label="Business/ Trade License No"
      name="business_license_no"
      [control]="formControlSignals()['tradeNo']"
      id="business_license_no"
      placeholder="Business/ Trade License No"
      [value]="''"
      [maxLength]="30"
      [isRequired]="false"
      >
    </app-input-field>
    </div>
    
    
    <div class="flex-1">    
          <app-input-field
            label="Business/ Trade License No"
            (blur)="onRLNoBlur()"
            (input)="onInputChange($event)"
            name="rlNo"
            formControlName="rlNo"
            id="rlNo"
            placeholder="Enter Number Only"
            maxlength="6"
          />
        </div>
      <div class="flex-1">
            <app-input-field
            label="Website URL"
            name="website_url"
            id="website_url"
            [control]="formControlSignals()['webUrl']"
            placeholder="Type Website URL"
            [value]="''"
            [maxLength]="50"
            [isRequired]="false"
            >
            </app-input-field>           
        </div>   
  </div>
      </div>

      <div class="max-w-7xl p-6 mx-auto flex-col mt-6 items-start gap-5 rounded-2xl bg-white shadow-lg">
        <h2 class="flex items-center mb-4 text-lg font-semibold text-blue-700">
          <span class="icon icon-phone mr-2"></span> Fill in the contact info for whom we may reach out
        </h2>

        <!-- Contact -->
  
    <div class=" flex flex-cols-1 sm:flex-cols-2 gap-4">
      <div class="flex-1">
        <app-input-field
        label="Contact Person's Name"
        name="txtContactPerson"
        id="txtContactPerson"
        [control]="formControlSignals()['contactName']"
        placeholder="Type contact person's name"
        [value]="''"
        [maxLength]="100"
        [isRequired]="true"
        >
      </app-input-field>
      <div class="text-red-600 mt-0">
        @if (employeeForm.controls['contactName'].touched &&  employeeForm.controls['contactName'].errors?.['required']) {
        <span class="error-message">This is required</span>
        }
    </div>
      </div>
      <div class="flex-1">
        <app-input-field
        label="Contact Person's Designation"
        name="txtDesignation"
        id="txtDesignation"
        [control]="formControlSignals()['contactDesignation']"
        placeholder="Type contact person's designation"
        [value]="''"
        [maxLength]="100"
        [isRequired]="true"
        >
      </app-input-field>
      <div class="text-red-600">
        @if (employeeForm.controls['contactDesignation'].touched &&  employeeForm.controls['contactDesignation'].errors?.['required']) {
        <span class="error-message">This is required</span>
        }
    </div>
      </div>
    </div>
  
    <div class="flex flex-cols-1 sm:flex-cols-2 gap-4">
      <div class="flex-1">
        <app-input-field
        label="Contact Person's Email"
        name="txtContactEmail"
        id="txtContactEmail"
        [control]="formControlSignals()['contactEmail']"
        placeholder="Type contact person's email"
        [value]="''"
        [maxLength]="45"
        [isRequired]="true"
        >
      </app-input-field>
      <div class="text-red-600">
        @if (employeeForm.controls['contactEmail'].touched &&  employeeForm.controls['contactEmail'].errors?.['required']) {
        <span class="error-message">This is required</span>
        }
        @else if (employeeForm.controls['contactEmail'].errors?.['email']) {
          <span class="error-message">Please enter a valid email address</span>
        }
    </div>
      </div>
      <div class="flex-1">
        <app-input-field
        label="Contact Person's Mobile"
        name="txtContactMobile"
        id="txtContactMobile"
        [control]="formControlSignals()['contactMobile']"
        placeholder="Mobile number"
        [value]="''"
        [maxLength]="13"
        [isRequired]="false"
        >
      </app-input-field>
      </div>
    </div>